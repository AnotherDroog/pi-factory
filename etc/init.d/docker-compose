#!/sbin/openrc-run

## LNCM post-installation script
## To be run on persistently installed SD card

depend() {
  need net sshd docker lncm-online
}

start() {
  ebegin "Starting docker-compose"

  cd /home/lncm/compose
  docker-compose up -d

  eend $?
}

stop() {
  ebegin "Stopping docker compose"
  # TODO: block until bitcoind has shut down cleanly
  /usr/local/sbin/mana stop
  cd /home/lncm/compose
  docker-compose down

  eend $?
}
